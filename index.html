<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // Считываем ID аукциона из ссылки
    const auctionId = tg.initDataUnsafe.start_param;

    // Выводим ID для проверки (потом можно убрать)
    if (auctionId) {
        document.getElementById('price').innerText = "Аукцион №" + auctionId;
    }

    // Находим твою кнопку по ID
    const bidBtn = document.getElementById('bid_btn');

    bidBtn.addEventListener('click', function() {
        if (!auctionId) {
            alert("Ошибка: ID аукциона не получен!");
            return;
        }

        // Формируем объект данных
        const data = {
            auction_id: auctionId,
            action: "bid"
        };

        // Отправляем данные боту (строкой JSON)
        tg.sendData(JSON.stringify(data));
        
        // Закрываем приложение
        tg.close();
    });
</script>

