<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: sans-serif; text-align: center; background: #1c1c1c; color: white; padding: 20px; }
        .btn { padding: 15px 25px; background: #0088cc; color: white; border: none; border-radius: 10px; font-size: 18px; cursor: pointer; }
        .history { margin-top: 20px; text-align: left; background: #2b2b2b; padding: 10px; border-radius: 8px; }
        .bid-item { border-bottom: 1px solid #444; padding: 5px 0; }
    </style>
</head>
<body>
    <h2 id="price">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
    <p id="status_text">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã –ø–æ–¥–Ω—è—Ç—å —Å—Ç–∞–≤–∫—É</p>
    
    <button id="bid_btn" class="btn">–ü–æ–¥–Ω—è—Ç—å —Å—Ç–∞–≤–∫—É üöÄ</button>

    <div class="history">
        <strong>–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å—Ç–∞–≤–∫–∏:</strong>
        <div id="history_list">
            <p style="color: #888;">–û–±–Ω–æ–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ —Å—Ç–∞–≤–∫–∏...</p>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        
        // –û—à–∏–±–∫–∞ "—á–µ—Ä–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞" —á–∞—Å—Ç–æ –ª–µ—á–∏—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–æ–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
        tg.ready();
        tg.expand();

        const auctionId = tg.initDataUnsafe.start_param;
        const priceEl = document.getElementById('price');
        const bidBtn = document.getElementById('bid_btn');

        if (auctionId) {
            priceEl.innerText = "–ê—É–∫—Ü–∏–æ–Ω ‚Ññ" + auctionId;
        } else {
            priceEl.innerText = "ID –Ω–µ –Ω–∞–π–¥–µ–Ω";
            document.getElementById('status_text').innerText = "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–∫—Ä–æ–π—Ç–µ —Å—Å—ã–ª–∫—É –∏–∑ –∫–∞–Ω–∞–ª–∞";
        }

        bidBtn.addEventListener('click', function() {
            if (!auctionId) return;

            // –ß—Ç–æ–±—ã —é–∑–µ—Ä –≤–∏–¥–µ–ª, —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –∏–¥–µ—Ç
            bidBtn.innerText = "–û—Ç–ø—Ä–∞–≤–∫–∞...";
            bidBtn.disabled = true;

            const data = {
                auction_id: auctionId,
                action: "bid"
            };

            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –±–æ—Ç—É
            tg.sendData(JSON.stringify(data));

            // –ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å, —á—Ç–æ–±—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ù–ï –ó–ê–ö–†–´–í–ê–õ–û–°–¨:
            // –í–ê–ñ–ù–û: tg.sendData –ü–û-–õ–Æ–ë–û–ú–£ –∑–∞–∫—Ä–æ–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram.
            // –ß—Ç–æ–±—ã –æ–Ω–æ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–ª–æ—Å—å, –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AJAX-–∑–∞–ø—Ä–æ—Å—ã –∫ —Ç–≤–æ–µ–º—É —Å–µ—Ä–≤–µ—Ä—É.
            // –ù–æ –≤ —Ä–∞–º–∫–∞—Ö —Ç–≤–æ–µ–≥–æ —Ç–µ–∫—É—â–µ–≥–æ –¢–ó (–ø—É–Ω–∫—Ç 5) –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è GitHub Pages ‚Äî 
            // –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ—Å–ª–µ —Å—Ç–∞–≤–∫–∏ ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.
        });
    </script>
</body>
</html>
